<div id="result">요청중...</div>
<script>
const raw = decodeURIComponent(location.pathname.substring(1));
async function generate() {
    if (raw.length < 1 || raw.length > 10) return alert("1~10자 사이로 입력해주세요.");
    const url = `https://g.keddie213.workers.dev/shorten?u=${encodeURIComponent(raw)}`;
    try {
        const res = await fetch(url);
        const text = await res.text();

        document.getElementById("result").innerText = 
            `입력: ${raw}\n결과: ${text}`;
    } catch(e) {
        document.getElementById("result").innerText = "요청 실패 에러" + e;
    }
}
window.onload = () => {
  console.log("페이지 열자마자 실행됨");
  generate();
};
</script>